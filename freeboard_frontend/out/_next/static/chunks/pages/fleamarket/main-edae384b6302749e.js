(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{39258:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return ln}});var r,o,i,a,c,d,s,l,u,f,p,h=t(38033),x=t(91),g=t(74902),m=t(71641),v=t(30168),b=t(10386),j=b.Z.div(r||(r=(0,v.Z)(["\n  display: flex;\n  justify-content: center;\n  margin-top: 60px;\n"]))),y=b.Z.div(o||(o=(0,v.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-evenly;\n  align-items: center;\n  width: 1200px;\n  min-height: 1200px;\n  margin-top: 100px;\n"]))),Z=b.Z.div(i||(i=(0,v.Z)(["\n  display: flex;\n  width: 1200px;\n  justify-content: space-between;\n  align-items: center;\n"]))),w=b.Z.div(a||(a=(0,v.Z)(["\n  width: 200px;\n  height: 60px;\n  border-radius: 15px;\n  background-color: #e8f9fd;\n  border: 1px solid #79dae8;\n  color: #0aa1dd;\n  display: flex;\n  justify-content: center;\n  flex-direction: row;\n  align-items: center;\n  font-size: 24px;\n  cursor: pointer;\n  :hover {\n    color: #0aa1dd;\n    font-weight: bold;\n    border: 2px solid #79dae8;\n  }\n"]))),k=b.Z.div(c||(c=(0,v.Z)(["\n  margin-top: 20px;\n  width: 1200px;\n  display: flex;\n  justify-content: center;\n  flex-direction: row;\n"]))),_=b.Z.div(d||(d=(0,v.Z)(["\n  margin-top: 10px;\n  border-radius: 10px;\n  background-color: #e8f9fd;\n  padding-top: 20px;\n  padding-left: 20px;\n  display: flex;\n  flex-direction: column;\n  min-height: 200px;\n  cursor: pointer;\n  :hover {\n    border: 2px solid #2155cd;\n    border-radius: 10px;\n    font-weight: bold;\n  }\n"]))),C=b.Z.div(s||(s=(0,v.Z)(["\n  color: #79dae8;\n  font-size: 20px;\n"]))),O=b.Z.span(l||(l=(0,v.Z)(["\n  font-size: 20px;\n  padding: 5px 15px;\n  border-radius: 10px;\n  background-color: #2155cd;\n  margin: 0px 10px;\n"]))),S=b.Z.div(u||(u=(0,v.Z)(["\n  width: 100%;\n  padding: 10px;\n  border-radius: 10px;\n  display: flex;\n  font-size: 20px;\n  margin: 20px 0px;\n  background-color: #0aa1dd;\n  color: #2155cd;\n"]))),P=b.Z.div(f||(f=(0,v.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-evenly;\n"]))),U=b.Z.img(p||(p=(0,v.Z)(["\n  width: 150px;\n  height: 150px;\n  object-fit: scale-down;\n"]))),M=t(246),I=t.n(M),z=t(27856),E=t.n(z),N=t(96486),D=t.n(N),L=t(1413),$=t(67294),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},T=t(42135),K=function(n,e){return $.createElement(T.Z,(0,L.Z)((0,L.Z)({},n),{},{ref:e,icon:R}))};K.displayName="SearchOutlined";var Q,q,A,B=$.forwardRef(K),J=b.Z.div(Q||(Q=(0,v.Z)(["\n  width: 500px;\n  height: 60px;\n  border-radius: 15px;\n  background-color: #e8f9fd;\n  padding: 0px 20px;\n  border: 1px solid #79dae8;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]))),X=(0,b.Z)(B)(q||(q=(0,v.Z)(["\n  color: #0aa1dd;\n  font-size: 25px;\n  cursor: default;\n"]))),G=b.Z.input(A||(A=(0,v.Z)(["\n  ::placeholder {\n    color: #79dae8;\n    font-style: italic;\n  }\n  color: #0aa1dd;\n  border: none;\n  outline: none;\n  background: none;\n  font-size: 20px;\n  padding-left: 15px;\n"]))),H=t(85893);function V(n){return(0,H.jsxs)(J,{children:[(0,H.jsx)(X,{}),(0,H.jsx)(G,{placeholder:"\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694.",onChange:n.onChangeSearchbar})]})}function F(n){var e=D().debounce((function(e){n.refetch({search:e}),n.onChangeKeyword(e)}),400);return(0,H.jsx)(V,{onChangeSearchbar:function(n){e(n.target.value)}})}function W(n){var e;return(0,H.jsx)(j,{children:(0,H.jsxs)(y,{children:[(0,H.jsxs)(Z,{children:[(0,H.jsx)(w,{onClick:n.onClickReg,children:"\ud310\ub9e4\ud558\uae30"}),(0,H.jsx)(F,{refetch:n.refetch,onChangeKeyword:n.onChangeKeyword})]}),(0,H.jsx)(k,{children:(0,H.jsx)(I(),{pageStart:0,loadMore:n.onLoadMore,hasMore:!0,children:null===(e=n.dataItems)||void 0===e?void 0:e.fetchUseditems.map((function(e){var t,r,o,i;return(0,H.jsxs)(_,{onClick:n.onClickMoveToDetail(e),children:[(0,H.jsxs)("div",{children:[(0,H.jsxs)(C,{children:["\ud310\ub9e4\uc790 : ",e.name]}),(0,H.jsxs)(C,{children:["\ud55c\uc904\uc694\uc57d : ",e.remarks]}),(0,H.jsxs)(C,{children:["\uac00\uaca9 : ",e.price]}),(0,H.jsxs)(C,{children:["\ud0dc\uadf8 :",null===(t=n.dataItems)||void 0===t||null===(r=t.fetchUseditems)||void 0===r||null===(o=r.tags)||void 0===o?void 0:o.map((function(n,e){return(0,H.jsx)(O,{children:n},e)}))]}),(0,H.jsxs)(C,{children:["\uc791\uc131\uc2dc\uac04 : ",e.createdAt.slice(0,10)]}),(0,H.jsx)(P,{children:null===(i=e.images)||void 0===i?void 0:i.filter((function(n){return n})).map((function(n){return(0,H.jsx)(U,{src:"https://storage.googleapis.com/".concat(n)},n)}))})]}),(0,H.jsx)(S,{dangerouslySetInnerHTML:{__html:E().sanitize(String(e.contents))}})]},e._id)}))})})]})})}var Y,nn,en=t(17283),tn=(0,en.Ps)(Y||(Y=(0,v.Z)(["\n  query fetchUseditems($isSoldout: Boolean, $search: String, $page: Int) {\n    fetchUseditems(isSoldout: $isSoldout, search: $search, page: $page) {\n      _id\n      name\n      remarks\n      contents\n      price\n      createdAt\n      images\n      tags\n    }\n  }\n"]))),rn=t(11163),on=t(93757),an=t(47595),cn=(0,en.Ps)(nn||(nn=(0,v.Z)(["\n  query fetchUserLoggedIn {\n    fetchUserLoggedIn {\n      _id\n      email\n      name\n      picture\n      userPoint {\n        _id\n        amount\n        user\n      }\n    }\n  }\n"])));var dn=["__typename"];function sn(){var n=(0,$.useContext)(an.GlobalContext).setItem,e=(0,$.useState)(""),t=e[0],r=e[1],o={data:(0,m.a)(cn).data}.data,i=(0,m.a)(tn,{variables:{page:1,search:""}}),a=i.data,c=i.fetchMore,d=i.refetch,s=(0,on.V0)(new Date);return console.log(a),(0,H.jsx)(W,{data:o,dataItems:a,onClickReg:function(){rn.default.push("/fleamarket/reg")},onLoadMore:function(){var n;a&&c({variables:{page:Math.ceil((null===a||void 0===a||null===(n=a.fetchUseditems)||void 0===n?void 0:n.length)/10)+1},updateQuery:function(n,e){var t=e.fetchMoreResult;return null!==t&&void 0!==t&&t.fetchUseditems?{fetchUseditems:[].concat((0,g.Z)(n.fetchUseditems),(0,g.Z)(t.fetchUseditems))}:{fetchUseditems:(0,g.Z)(n.fetchUseditems)}}})},onClickMoveToDetail:function(e){return function(){var t=JSON.parse(localStorage.getItem(s)||"[]").filter((function(n){return n._id!==e._id})),r=(e.__typename,(0,x.Z)(e,dn));t.unshift(r),localStorage.setItem(s,JSON.stringify(t)),n(t),rn.default.push("/fleamarket/".concat(e._id))}},onChangeKeyword:function(n){r(n)},keyword:t,refetch:d})}var ln=(0,h.Q)((function(){return(0,H.jsx)(sn,{})}))},38033:function(n,e,t){"use strict";t.d(e,{Q:function(){return d}});var r=t(4942),o=t(11163),i=t(67294),a=t(85893);function c(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}var d=function(n){return function(e){var t=(0,o.useRouter)();return(0,i.useEffect)((function(){document.cookie||(alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud55c \uc11c\ube44\uc2a4 \uc785\ub2c8\ub2e4."),t.push("/fleamarket/login"))}),[]),(0,a.jsx)(n,function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?c(Object(t),!0).forEach((function(e){(0,r.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({},e))}}},67093:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/fleamarket/main",function(){return t(39258)}])}},function(n){n.O(0,[662,369,774,888,179],(function(){return e=67093,n(n.s=e);var e}));var e=n.O();_N_E=e}]);